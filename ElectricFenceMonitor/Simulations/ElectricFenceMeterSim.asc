Version 4
SHEET 1 1796 680
WIRE 1216 -368 1216 -384
WIRE 512 -288 512 -352
WIRE 512 -288 400 -288
WIRE 1216 -272 1216 -288
WIRE 400 -256 400 -288
WIRE 176 -240 176 -336
WIRE 512 -176 512 -288
WIRE 176 -128 176 -160
WIRE 224 -128 176 -128
WIRE 320 -128 288 -128
WIRE 400 -128 400 -176
WIRE 400 -128 320 -128
WIRE 448 -128 400 -128
WIRE 512 -32 512 -80
WIRE 544 -32 512 -32
WIRE 608 -32 544 -32
WIRE 752 -32 672 -32
WIRE 864 -32 752 -32
WIRE 896 -32 864 -32
WIRE 752 48 752 -32
WIRE 864 48 864 -32
WIRE -480 64 -480 32
WIRE -176 64 -176 -160
WIRE 176 64 176 -128
WIRE 320 64 320 -128
WIRE 400 64 400 -128
WIRE 544 64 544 -32
WIRE -480 176 -480 144
WIRE 176 208 176 144
WIRE 320 208 320 128
WIRE 320 208 176 208
WIRE 400 208 400 144
WIRE 400 208 320 208
WIRE 544 208 544 144
WIRE 544 208 400 208
WIRE 752 208 752 112
WIRE 752 208 544 208
WIRE 864 208 864 128
WIRE 864 208 752 208
WIRE -176 256 -176 144
WIRE 176 256 176 208
FLAG -176 256 0
FLAG 176 256 0
FLAG 896 -32 Vpeak
IOPIN 896 -32 Out
FLAG 176 -336 Vfence
IOPIN 176 -336 Out
FLAG -176 -160 Vfence
IOPIN -176 -160 Out
FLAG -480 176 0
FLAG -480 32 Vss
IOPIN -480 32 BiDir
FLAG 512 -352 Vss
IOPIN 512 -352 BiDir
FLAG 1216 -272 0
FLAG 1216 -384 SupplyIntegrated
SYMBOL voltage -176 48 R0
WINDOW 3 14 293 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL value_scale_factor={VSCALE} 0.5 0 repeat forever (file=FencePulse.pwl) endrepeat
SYMBOL res 192 -144 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 20Meg
SYMBOL res 192 160 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL res 848 32 R0
SYMATTR InstName R5
SYMATTR Value 10Meg
SYMBOL diode 608 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 736 48 R0
SYMATTR InstName C1
SYMATTR Value 2µ
SYMBOL voltage -480 48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3.3
SYMBOL cap 288 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 40 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL npn 448 -176 R0
SYMATTR InstName Q1
SYMATTR Value BC547B
SYMBOL res 384 -272 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res 384 48 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 528 48 R0
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL bv 1216 -384 R0
SYMATTR InstName B1
SYMATTR Value V=idt(I(V2))
SYMBOL zener 336 128 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value UMZ5_1N
TEXT -160 368 Left 2 !.tran 0 10 0
TEXT -160 312 Left 2 !.step param VSCALE list 0.1 0.2 0.5 1 1.2
TEXT 1192 -200 Left 2 !.meas tran ave_cur FIND V(supplyintegrated) at 1.0
